<div class="flex-container-column fill-container">
  @if (!(fullscreenService.isFullscreen$ | async)) {
    <div class="flex-container-row" >
  <div class="bg-white border border-gray-300 rounded-lg shadow-mat-8 p-3 distance16" style="flex: 1 1 100%; box-sizing: border-box; max-width:60%;">
                <div class="w-full">
          <!-- Tab buttons -->
          <div class="overflow-x-auto">
            <div class="flex space-x-2 w-max border-b border-gray-200 mb-2">
              <button
                class="px-3 py-1.5 text-xs font-medium border-b-2 focus:outline-none"
                [class.text-primary-600]="leftTab === 0"
                [class.border-primary-600]="leftTab === 0"
                [class.text-gray-500]="leftTab !== 0"
                [class.border-transparent]="leftTab !== 0"
                (click)="onSelectTab({index: 0})">
                Displaying Forms
              </button>
              <button
                class="px-3 py-1.5 text-xs font-medium border-b-2 focus:outline-none"
                [class.text-primary-600]="leftTab === 1"
                [class.border-primary-600]="leftTab === 1"
                [class.text-gray-500]="leftTab !== 1"
                [class.border-transparent]="leftTab !== 1"
                (click)="onSelectTab({index: 1})">
                Checkboxes and radiobuttons
              </button>
              <button
                class="px-3 py-1.5 text-xs font-medium border-b-2 focus:outline-none"
                [class.text-primary-600]="leftTab === 2"
                [class.border-primary-600]="leftTab === 2"
                [class.text-gray-500]="leftTab !== 2"
                [class.border-transparent]="leftTab !== 2"
                (click)="onSelectTab({index: 2})">
                Corner cases
              </button>
              <button
                class="px-3 py-1.5 text-xs font-medium border-b-2 focus:outline-none"
                [class.text-primary-600]="leftTab === 3"
                [class.border-primary-600]="leftTab === 3"
                [class.text-gray-500]="leftTab !== 3"
                [class.border-transparent]="leftTab !== 3"
                (click)="onSelectTab({index: 3})">
                Forms raw data (under construction)
              </button>
              <button
                class="px-3 py-1.5 text-xs font-medium border-b-2 focus:outline-none"
                [class.text-primary-600]="leftTab === 4"
                [class.border-primary-600]="leftTab === 4"
                [class.text-gray-500]="leftTab !== 4"
                [class.border-transparent]="leftTab !== 4"
                (click)="onSelectTab({index: 4})">
                Downloading form data in a BLOB
              </button>
              <button
                class="px-3 py-1.5 text-xs font-medium border-b-2 focus:outline-none"
                [class.text-primary-600]="leftTab === 5"
                [class.border-primary-600]="leftTab === 5"
                [class.text-gray-500]="leftTab !== 5"
                [class.border-transparent]="leftTab !== 5"
                (click)="onSelectTab({index: 5})">
                XFA Forms
              </button>
            </div>
          </div>

          <!-- Tab content -->
          @if (leftTab === 0) {
          <div class="tab-content">
<p class="text-sm mb-3">
              <b>Configuration:</b><br />
              If you're using the default options, you don't have to do anything to activate the feature. If you're using custom options, make sure to activate
              the setting <code>renderInteractiveForms: true</code>. Caveat. starting with pdf.js 2.11, the parameter has been renamed to
              <code>renderForms</code>.
            </p>
            <p class="text-sm mb-3">
              `[(formData)]` links the fields in the PDF form with your Angular component. Note that `(formDataChange)` reports every filled input field of the
              PDF file, including fields you didn't send with `[formData]`.
            </p>

            <!-- Multi-column form layout -->
            <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
              <!-- Left Column -->
              <div class="space-y-3">
                <div>
                  <label for="first-name-input" class="block text-sm font-medium text-gray-700 mb-1">First Name</label>
                  <input id="first-name-input"
                    class="w-full px-2 py-1 text-sm border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-1 focus:ring-primary-500 focus:border-primary-500"
                    [(ngModel)]="firstName"
                    (ngModelChange)="this.delayedUpdateFormData()"
                    placeholder="first name" />
                </div>
                <div>
                  <label for="last-name-input" class="block text-sm font-medium text-gray-700 mb-1">Last Name</label>
                  <input id="last-name-input"
                    class="w-full px-2 py-1 text-sm border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-1 focus:ring-primary-500 focus:border-primary-500"
                    (ngModelChange)="this.delayedUpdateFormData()"
                    [(ngModel)]="lastName"
                    placeholder="last name" />
                </div>
                <div>
                  <label class="block text-xs font-medium text-gray-700 mb-1">Country</label>
                  <select class="w-full px-2 py-1 text-sm border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-1 focus:ring-primary-500 focus:border-primary-500" (selectionChange)="this.updateFormData()" [(ngModel)]="country">
                    @for (country of countries; track country) {
                      <option [value]="country">{{ country }}</option>
                    }
                  </select>
                </div>
                <div>
                  <label for="job-experience-input" class="block text-sm font-medium text-gray-700 mb-1">Job Experience</label>
                  <input id="job-experience-input"
                    class="w-full px-2 py-1 text-sm border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-1 focus:ring-primary-500 focus:border-primary-500"
                    (ngModelChange)="this.delayedUpdateFormData()"
                    [(ngModel)]="jobExperience"
                    placeholder="job experience (corner case!)" />
                </div>
                <div>
                  <label class="block text-xs font-medium text-gray-700 mb-1">Databases</label>
                  <select class="w-full px-2 py-1 text-sm border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-1 focus:ring-primary-500 focus:border-primary-500" (selectionChange)="this.updateFormData()" [(ngModel)]="databases" multiple>
                    <option value="oracle">Oracle</option>
                    <option value="sqlServer">SQL Server</option>
                    <option value="db2">DB2</option>
                    <option value="postgreSQL">PostgreSQL</option>
                  </select>
                </div>
              </div>

              <!-- Right Column -->
              <div class="space-y-3">
                <div>
                  <label for="other-job-experience-textarea" class="block text-sm font-medium text-gray-700 mb-1">Other Job Experience</label>
                  <textarea
                    id="other-job-experience-textarea"
                    class="w-full px-2 py-1 text-sm border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-1 focus:ring-primary-500 focus:border-primary-500"
                    rows="3"
                    (ngModelChange)="this.delayedUpdateFormData()"
                    [(ngModel)]="otherJobExperience"
                    placeholder="Other Job Experience"
                  ></textarea>
                </div>

                <!-- Programming Languages -->
                <div>
                  <label class="block text-xs font-medium text-gray-700 mb-2">Programming Languages</label>
                  <div class="grid grid-cols-2 gap-1">
                    <label class="flex items-center space-x-1 text-sm">
                      <input type="checkbox" class="form-checkbox text-primary-600 w-3 h-3" [checked]="typeScript==='Yes'" (change)="onTypeScriptChange($event)" />
                      <span class="text-xs">TypeScript</span>
                    </label>
                    <label class="flex items-center space-x-1 text-sm">
                      <input type="checkbox" class="form-checkbox text-primary-600 w-3 h-3" [checked]="javaScript==='Yes'" (change)="onJavaScriptChange($event)" />
                      <span class="text-xs">JavaScript</span>
                    </label>
                    <label class="flex items-center space-x-1 text-sm">
                      <input type="checkbox" class="form-checkbox text-primary-600 w-3 h-3" [checked]="java" (change)="onJavaChange($event)" />
                      <span class="text-xs">Java</span>
                    </label>
                    <label class="flex items-center space-x-1 text-sm">
                      <input type="checkbox" class="form-checkbox text-primary-600 w-3 h-3" [checked]="cSharp" (change)="onCSharpChange($event)" />
                      <span class="text-xs">C#</span>
                    </label>
                  </div>
                </div>

                <!-- Education Level -->
                <div>
                  <label class="block text-xs font-medium text-gray-700 mb-2">Education Level</label>
                  <div class="radio-group">
                    <label>
                      <input type="radio" class="form-radio text-primary-600 w-3 h-3" value="highSchool" (change)="this.updateFormData()" [(ngModel)]="educationLevel" aria-label="Education Level" />
                      <span class="text-xs">High School Diploma</span>
                    </label>
                    <label>
                      <input type="radio" class="form-radio text-primary-600 w-3 h-3" value="associateDegree" (change)="this.updateFormData()" [(ngModel)]="educationLevel" aria-label="Education Level" />
                      <span class="text-xs">Associate's Degree</span>
                    </label>
                    <label>
                      <input type="radio" class="form-radio text-primary-600 w-3 h-3" value="bachelorDegree" (change)="this.updateFormData()" [(ngModel)]="educationLevel" aria-label="Education Level" />
                      <span class="text-xs">Bachelor's Degree</span>
                    </label>
                    <label>
                      <input type="radio" class="form-radio text-primary-600 w-3 h-3" value="masterDegree" (change)="this.updateFormData()" [(ngModel)]="educationLevel" aria-label="Education Level" />
                      <span class="text-xs">Master's Degree</span>
                    </label>
                  </div>
                </div>
              </div>
            </div>
          </div>
          }
          @if (leftTab === 1) {
          <div class="tab-content">
<p>
              Checkboxes and radiobuttons are remarkable flexible in PDF forms:
            </p>
            <ul>
              <li>Checkboxes usually don't map to boolean values. Instead, they often use "export values" like "Yes" and "No".</li>
              <li>Checkboxes can be used as radiobuttons and vice versa.</li>
            </ul>
            <p>ngx-extended-pdf-viewer aims to support all these options. However, even after so many years of development users report
              bugs because my original implementation was too simple. I hope I've managed to fix all the bugs now.
            </p>
            <p>One result of my original misconception is that checkboxes both support boolean values and the real export values.
              However, the `(formData)` event always reports the export values. You need to convert it to boolean values yourself.
              The demo showcases this; you can find the source code at
              <a target="_blank"
              href="https://github.com/stephanrauh/extended-pdf-viewer-showcase/tree/main/src/app/extended-pdf-viewer/forms">https://github.com/stephanrauh/extended-pdf-viewer-showcase/tree/main/src/app/extended-pdf-viewer/forms</a>.
            </p>
          </div>
          }
          @if (leftTab === 2) {
          <div class="tab-content">
<p>
              The "job experience" field of the live demo shows a corner case. The Angular application shows a different value than the form when loading the
              page.
            </p>
            <p>
              The PDF form has a default value. The Angular application passes a different default value using <code>[formData]</code>. In this case, the value
              stored in the PDF file wins.
            </p>
            <p>
              The sourcecodes in the "corner case" tab show how to let the values in the Angular application win. The basic idea is to delay populating
              <code>[formData]</code> until the page has been rendered.
            </p>
          </div>
          }
          @if (leftTab === 3) {
          <div class="tab-content">
<p>You can access low-level form data using <code>NgxExtendedPdfViewerService.getFormData().</code></p>
            <p>You can use this demo to find out the names of the fields in the PDF file.</p>
            <p><b>Caveat:</b> The API is subject to change.</p>
            <p>Also note that radiobuttons (and checkboxes which are used as radiobuttons) have a very peculiar representation.
            This is a low-level API, so it displays all the internal complexity.</p>
            <section class="section" style="margin-top: 5px; margin-bottom: 10px">
              <button class="bg-primary-500 hover:bg-primary-600 text-white font-medium py-1.5 px-3 text-sm rounded shadow" (click)="readRawFormDescription()" style="margin-left: 10px">read low-level form description</button>
            </section>
            @if (rawFormData) {
              <table>
                <tr>
                  <td>Name</td>
                  <td>Coordinates<br />(0, 0) = bottom left</td>
                  <td>Page number</td>
                  <td>Json (a small selection)</td>
                </tr>
                @for (field of rawFormData; track field) {
                  <tr>
                    <td>{{ field.fieldName }}</td>
                    <td>{{ field.rect }}</td>
                    <td>{{ field.pageNumber }}</td>
                    <td>{{ field | json }}</td>
                  </tr>
                }
              </table>
            }
          </div>
          }
          @if (leftTab === 4) {
          <div class="tab-content">
<p>You can download the PDF file as a BLOB. The user can fill the PDF form, and you can download the file containing the user's input.</p>
            <section class="section" style="margin-top: 5px; margin-bottom: 10px">
              <button class="bg-primary-500 hover:bg-primary-600 text-white font-medium py-1.5 px-3 text-sm rounded shadow" (click)="downloadAsBlob()" style="margin-left: 10px">
                download the file as BLOB and open it in a new tab
              </button>
            </section>
            @if (downloaded) {
              <p>{{ downloaded }}</p>
            }
          </div>
          }
          @if (leftTab === 5) {
          <div class="tab-content">
<p>ngx-extended-pdf-viewer supports XFA forms. These forms are organizing their fields in a tree structure. This
              tree structure shows in the field names reported by <code>(formData)</code>. The field names are
              inspired by the field names the Java library iText uses, but without the array indexes.
            </p>
            <p>In contrast, <code>[formData]</code> optionally allows you to use the unqualified field name (i.e.
            only the last part of the name). Of course, two-way binding converts this field name to a
            fully qualified name in <code>(formData)</code>. Plus, the demo shows you might be in for a surprise: if
            the field name matches several fields, the PDF viewer populates a random field. Or even all of them
            simultaneously. Do yourself a favor and avoid the ambiguity. The demo deliberately shows what can
            go wrong!
          </p>
          <p>The demo requires you to download <a href="a Canadian immigration form">a Canadian immigration form</a> and to open it
          in the PDF viewer. I apologize for the inconvenience - until now, I've failed to find or create
        a demo file with a liberal license.</p>
        <!--
        <label class="flex items-center space-x-1 text-sm">
        <input type="checkbox" class="form-checkbox text-primary-600" [checked]="disableForms" (change)="disableForms=$event.checked" class="margin-right" />
        <span>[disableForms]="true" </span>
      </label>
        <br />
        -->
        <div class="space-y-1">
        <label for="service-in-select" class="block text-sm font-medium text-gray-700">Service in</label>
        <select id="service-in-select" class="w-full px-2 py-1 text-sm border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-1 focus:ring-primary-500 focus:border-primary-500" (selectionChange)="this.updateFormData()" [(ngModel)]="serviceIn">

            <option value=""></option>
            <option value="01">English</option>
            <option value="02">French</option>

        </select>
      </div>
        <div class="space-y-1">
          <label for="family-name-input" class="block text-sm font-medium text-gray-700 mb-1">Family Name</label>
          <input id="family-name-input" class="w-full px-2 py-1 text-sm border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-1 focus:ring-primary-500 focus:border-primary-500" class="margin"
            (ngModelChange)="this.delayedUpdateFormData()"
            [(ngModel)]="familyName"
            placeholder="Family name" />
        </div>
        <div class="space-y-1">
          <label for="birth-year-input" class="block text-sm font-medium text-gray-700 mb-1">Date of Birth (Year)</label>
          <input id="birth-year-input" class="w-full px-2 py-1 text-sm border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-1 focus:ring-primary-500 focus:border-primary-500" class="margin"
            (ngModelChange)="this.delayedUpdateFormData()"
            [(ngModel)]="dateOfBirthYear"
            placeholder="Date of birth (year)" />
        </div>
        <br />
        <label class="flex items-center space-x-1 text-sm">
        <input type="checkbox" class="form-checkbox text-primary-600" [checked]="canadaUS==='1'" (change)="this.setCanadaUs($event)" class="margin-right" />
        <span> Is your telephone number a number in Canada or the USA? </span>
      </label>
        <br />
        <label class="block text-sm font-medium text-gray-700 mb-2">Have you ever used a nickname?</label>
        <div class="radio-group">
          <label>
            <input type="radio" class="form-radio text-primary-600" value="Y" (change)="this.updateFormData()" [(ngModel)]="aliasNameIndicator" aria-label="Nickname" />
            <span>Yes</span>
          </label>
          <label>
            <input type="radio" class="form-radio text-primary-600" value="N" (change)="this.updateFormData()" [(ngModel)]="aliasNameIndicator" aria-label="Nickname" />
            <span>No</span>
          </label>
        </div>
        <span style="font-size:70%"> (this field is on page 2, near the bottom)</span>
          </div>
          }
        </div>
  </div>
  <div class="bg-white border border-gray-300 rounded-lg shadow-mat-8 p-3 distance16 progress" style="flex: 1 1 100%; box-sizing: border-box; max-width:38%">
            <div class="w-full">
          <!-- Tab buttons -->
          <div class="overflow-x-auto">
            <div class="flex space-x-2 w-max border-b border-gray-200 mb-2">
              <button
                class="px-3 py-1.5 text-xs font-medium border-b-2 focus:outline-none"
                [class.text-primary-600]="selectedTab === 0"
                [class.border-primary-600]="selectedTab === 0"
                [class.text-gray-500]="selectedTab !== 0"
                [class.border-transparent]="selectedTab !== 0"
                (click)="selectedTab = 0">
                HTML template
              </button>
              <button
                class="px-3 py-1.5 text-xs font-medium border-b-2 focus:outline-none"
                [class.text-primary-600]="selectedTab === 1"
                [class.border-primary-600]="selectedTab === 1"
                [class.text-gray-500]="selectedTab !== 1"
                [class.border-transparent]="selectedTab !== 1"
                (click)="selectedTab = 1">
                Typescript
              </button>
              <button
                class="px-3 py-1.5 text-xs font-medium border-b-2 focus:outline-none"
                [class.text-primary-600]="selectedTab === 2"
                [class.border-primary-600]="selectedTab === 2"
                [class.text-gray-500]="selectedTab !== 2"
                [class.border-transparent]="selectedTab !== 2"
                (click)="selectedTab = 2">
                HTML (corner case)
              </button>
              <button
                class="px-3 py-1.5 text-xs font-medium border-b-2 focus:outline-none"
                [class.text-primary-600]="selectedTab === 3"
                [class.border-primary-600]="selectedTab === 3"
                [class.text-gray-500]="selectedTab !== 3"
                [class.border-transparent]="selectedTab !== 3"
                (click)="selectedTab = 3">
                Typescript (corner case)
              </button>
              <button
                class="px-3 py-1.5 text-xs font-medium border-b-2 focus:outline-none"
                [class.text-primary-600]="selectedTab === 4"
                [class.border-primary-600]="selectedTab === 4"
                [class.text-gray-500]="selectedTab !== 4"
                [class.border-transparent]="selectedTab !== 4"
                (click)="selectedTab = 4">
                Reading raw forms data (prototype)
              </button>
              <button
                class="px-3 py-1.5 text-xs font-medium border-b-2 focus:outline-none"
                [class.text-primary-600]="selectedTab === 5"
                [class.border-primary-600]="selectedTab === 5"
                [class.text-gray-500]="selectedTab !== 5"
                [class.border-transparent]="selectedTab !== 5"
                (click)="selectedTab = 5">
                Download as BLOB
              </button>
            </div>
          </div>
          </div>

          <!-- Tab content -->
          @if (selectedTab === 0) {
          <div class="tab-content">
<app-ie11-markdown src="/assets/extended-pdf-viewer/forms/html.md"> </app-ie11-markdown>
          </div>
          }
          @if (selectedTab === 1) {
          <div class="tab-content">
<app-ie11-markdown src="/assets/extended-pdf-viewer/forms/ts.md"> </app-ie11-markdown>
          </div>
          }
          @if (selectedTab === 2) {
          <div class="tab-content">
<app-ie11-markdown src="/assets/extended-pdf-viewer/forms/html-corner.md"> </app-ie11-markdown>
          </div>
          }
          @if (selectedTab === 3) {
          <div class="tab-content">
<app-ie11-markdown src="/assets/extended-pdf-viewer/forms/ts-corner.md"> </app-ie11-markdown>
          </div>
          }
          @if (selectedTab === 4) {
          <div class="tab-content">
<app-ie11-markdown src="/assets/extended-pdf-viewer/forms/ts2.md"> </app-ie11-markdown>
          </div>
          }
          @if (selectedTab === 5) {
          <div class="tab-content">
<app-ie11-markdown src="/assets/extended-pdf-viewer/forms/ts3.md"> </app-ie11-markdown>
          </div>
          }
        </div>
</div>

}

<app-demo [src]="src">
  @if (visible) {
    <ngx-extended-pdf-viewer
      [theme]="theme"
      [disableForms]="disableForms"
      [src]="src"
      [height]="'90vh'"
      [zoom]="'auto'"
      [formData]="xfa ? xfaFormData : formData"
      (formDataChange)="setFormData($event)"
      [showUnverifiedSignatures]="true"
      >
    </ngx-extended-pdf-viewer>
  }
</app-demo>
</div>
