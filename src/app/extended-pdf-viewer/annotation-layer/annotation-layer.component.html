<div class="flex-container-column fill-container">
  @if (!(fullscreenService.isFullscreen$ | async)) {
  <div class="flex-container-row">
    <div class="bg-white border border-gray-300 rounded-lg shadow-mat-8 p-6 mt-1 margin-right flex-1 box-border max-w-[60%]">
      <div class="w-full">
        <!-- Tab buttons -->
        <div class="overflow-x-auto">
            <div class="flex space-x-2 w-max border-b border-gray-200 mb-2">
          <button
            class="px-3 py-1.5 text-xs font-medium border-b-2 focus:outline-none"
            [class.text-primary-600]="activeTab === 'types'"
            [class.border-primary-600]="activeTab === 'types'"
            [class.text-gray-500]="activeTab !== 'types'"
            [class.border-transparent]="activeTab !== 'types'"
            (click)="activeTab = 'types'">
            Types of layers
          </button>
          <button
            class="px-3 py-1.5 text-xs font-medium border-b-2 focus:outline-none"
            [class.text-primary-600]="activeTab === 'manipulating'"
            [class.border-primary-600]="activeTab === 'manipulating'"
            [class.text-gray-500]="activeTab !== 'manipulating'"
            [class.border-transparent]="activeTab !== 'manipulating'"
            (click)="activeTab = 'manipulating'">
            Manipulating the annotation layer
          </button>
        </div>
          </div>

        <!-- Tab content -->
        @if (activeTab === 'types') {
          <div class="tab-content">
          <p>
            The PDF viewer always renders the PDF file as a canvas. Often, it also generates additional layers on top of
            the canvas:
          </p>
          <ul>
            <li>The text layer allows you to mark and copy text. It's also the base of the search engine. You can render
              fast if
              you set <code>[textLayer]="false"</code>, but if you do, your users can't use the find bar.</li>
            <li>Interactive forms are part of the annotation layer.</li>
            <li>The editors of this PDF viewer use another layer to store you drawings and free-text.</li>
          </ul>
          <p>
            You don't have to think much about these layers most of the time. However, these layers are HTML divs, and
            you can
            manipulate them. </p>
        </div>
          }
        @if (activeTab === 'manipulating') {
          <div class="tab-content">
          <p>
            This demo uses the event listener
            <code>(annotationLayerRendered)</code> to fix a layout error in the document itself. The author has added a
            copyright box on page ii.
            By default, the box is too large, so the box is clipped. That looks attractive, too, but this demo reduces
            the size of the box
            to make it fit into the box without clipping it. As a side effect, the underlying link to a popular book
            vendor becomes visible.
          </p>
          <p>
            The demo also simulates a click on the popup trigger area. The popup appears on the right-hand side of
            the copyright box and has the same content. That looks a bit off - it's probably another bug of the PDF
            file. However, you can use this trick to open
            comment annotations programmatically, but I can't demonstrate that because I don't have a document under a
            friendly copyright at hand.</p>
          <p>
            There's a catch: the <code>(annotationLayerRendered)</code> trick does not work in the thumbnail view.
          </p>
          <button class="px-4 py-2 bg-primary-600 text-white rounded-md hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-primary-500" (click)="toggleEveryPopup()">Toggle popup
            programmatically</button>
        </div>
          }
      </div>
    </div>
    <div class="bg-white border border-gray-300 rounded-lg shadow-mat-8 p-6 mt-1 flex-1 box-border max-w-[38%]">
      <div class="w-full">
        <!-- Tab buttons -->
        <div class="overflow-x-auto">
            <div class="flex space-x-2 w-max border-b border-gray-200 mb-2">
          <button
            class="px-3 py-1.5 text-xs font-medium border-b-2 focus:outline-none"
            [class.text-primary-600]="codeTab === 'html'"
            [class.border-primary-600]="codeTab === 'html'"
            [class.text-gray-500]="codeTab !== 'html'"
            [class.border-transparent]="codeTab !== 'html'"
            (click)="codeTab = 'html'">
            HTML template
          </button>
          <button
            class="px-3 py-1.5 text-xs font-medium border-b-2 focus:outline-none"
            [class.text-primary-600]="codeTab === 'typescript'"
            [class.border-primary-600]="codeTab === 'typescript'"
            [class.text-gray-500]="codeTab !== 'typescript'"
            [class.border-transparent]="codeTab !== 'typescript'"
            (click)="codeTab = 'typescript'">
            TypeScript
          </button>
          <button
            class="px-3 py-1.5 text-xs font-medium border-b-2 focus:outline-none"
            [class.text-primary-600]="codeTab === 'popups'"
            [class.border-primary-600]="codeTab === 'popups'"
            [class.text-gray-500]="codeTab !== 'popups'"
            [class.border-transparent]="codeTab !== 'popups'"
            (click)="codeTab = 'popups'">
            Open popups programmatically
          </button>
        </div>
          </div>

        <!-- Tab content -->
        @if (codeTab === 'html') {
          <div class="tab-content">
          <app-ie11-markdown src="/assets/extended-pdf-viewer/annotation-layer/html.md"> </app-ie11-markdown>
        </div>
          }
        @if (codeTab === 'typescript') {
          <div class="tab-content">
          <app-ie11-markdown src="/assets/extended-pdf-viewer/annotation-layer/ts.md"> </app-ie11-markdown>
        </div>
          }
        @if (codeTab === 'popups') {
          <div class="tab-content">
          <app-ie11-markdown src="/assets/extended-pdf-viewer/annotation-layer/ts2.md"> </app-ie11-markdown>
        </div>
          }
      </div>
    </div>
  </div>
  }

  <app-demo [src]="'./assets/pdfs/The Public Domain - Enclosing the Commons of the Mind.pdf'">
    <ngx-extended-pdf-viewer [src]="'./assets/pdfs/The Public Domain - Enclosing the Commons of the Mind.pdf'"
      [page]="2" [zoom]="'page-fit'" (annotationLayerRendered)="onAnnotationLayerRendered($event)"
      [theme]="theme">
    </ngx-extended-pdf-viewer>
  </app-demo>
</div>
