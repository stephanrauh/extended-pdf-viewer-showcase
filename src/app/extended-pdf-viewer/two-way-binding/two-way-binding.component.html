<div class="flex-container-column fill-container">
  @if (!(fullscreenService.isFullscreen$ | async)) {
    <div class="flex-container-row" >
      <div class="bg-white border border-gray-300 rounded-lg shadow-mat-8 p-4 mt-1 margin-right flex-1 box-border max-w-[45%]">
        <div class="w-full">
          <!-- Tab buttons -->
          <div class="overflow-x-auto">
            <div class="flex space-x-2 w-max border-b border-gray-200 mb-2">
            <button
              class="px-3 py-1.5 text-xs font-medium border-b-2 focus:outline-none"
              [class.text-primary-600]="selectedTab === 0"
              [class.border-primary-600]="selectedTab === 0"
              [class.text-gray-500]="selectedTab !== 0"
              [class.border-transparent]="selectedTab !== 0"
              (click)="selectedTab = 0">
              Getting started
            </button>
            <button
              class="px-3 py-1.5 text-xs font-medium border-b-2 focus:outline-none"
              [class.text-primary-600]="selectedTab === 1"
              [class.border-primary-600]="selectedTab === 1"
              [class.text-gray-500]="selectedTab !== 1"
              [class.border-transparent]="selectedTab !== 1"
              (click)="selectedTab = 1">
              Page and page label
            </button>
            <button
              class="px-3 py-1.5 text-xs font-medium border-b-2 focus:outline-none"
              [class.text-primary-600]="selectedTab === 2"
              [class.border-primary-600]="selectedTab === 2"
              [class.text-gray-500]="selectedTab !== 2"
              [class.border-transparent]="selectedTab !== 2"
              (click)="selectedTab = 2">
              Forms
            </button>
          </div>
          </div>

          <!-- Tab content -->
          @if (selectedTab === 0) {
          <div class="tab-content">
            <p>
              Many properties of ngx-extended-pdf-viewer support two-way binding.
            </p>
            <div class="grid grid-cols-2 gap-x-4 gap-y-3">
              <div>
                <label for="zoom-input" class="block text-sm font-medium text-gray-700 mb-1">Zoom</label>
                <input id="zoom-input"
                       class="w-full px-2 py-1.5 text-sm border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500"
                       [(ngModel)]="zoom"
                       placeholder="auto, page-width, 150%"
                       aria-describedby="zoom-help" />
                <small id="zoom-help" class="block text-gray-500 mt-0.5 text-xs">(currentZoomFactor)="{{currentZoomFactor}}"</small>
              </div>

              <div>
                <label for="rotation-input" class="block text-sm font-medium text-gray-700 mb-1">Rotation</label>
                <input id="rotation-input"
                       class="w-full px-2 py-1.5 text-sm border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500"
                       [(ngModel)]="rotation"
                       placeholder="0, 90, 180, 270"
                       aria-describedby="rotation-help" />
                <small id="rotation-help" class="block text-gray-500 mt-0.5 text-xs">Rotation in degrees</small>
              </div>

              <div>
                <label for="spread-input" class="block text-sm font-medium text-gray-700 mb-1">Spread Mode</label>
                <input id="spread-input"
                       class="w-full px-2 py-1.5 text-sm border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500"
                       [(ngModel)]="spread"
                       placeholder="off, even, odd"
                       aria-describedby="spread-help" />
                <small id="spread-help" class="block text-gray-500 mt-0.5 text-xs">Page spread configuration</small>
              </div>

              <div>
                <label for="scrollmode-input" class="block text-sm font-medium text-gray-700 mb-1">Scroll Mode</label>
                <input id="scrollmode-input"
                       class="w-full px-2 py-1.5 text-sm border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500"
                       [(ngModel)]="scrollMode"
                       placeholder="0, 1, 2, 3"
                       aria-describedby="scrollmode-help" />
                <small id="scrollmode-help" class="block text-gray-500 mt-0.5 text-xs">0=vertical 1=horizontal 2=block 3=single page</small>
              </div>

              <div>
                <label for="sidebar-input" class="block text-sm font-medium text-gray-700 mb-1">Active Sidebar View</label>
                <input id="sidebar-input"
                       class="w-full px-2 py-1.5 text-sm border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500"
                       [(ngModel)]="activeSidebarView"
                       placeholder="1, 2, 3, 4"
                       aria-describedby="sidebar-help" />
                <small id="sidebar-help" class="block text-gray-500 mt-0.5 text-xs">1=thumbnails 2=outline 3=attachments 4=layers</small>
              </div>

              <div class="flex items-center">
                <label class="flex items-center space-x-2">
                  <input type="checkbox"
                         id="sidebar-visible-checkbox"
                         class="form-checkbox text-primary-600"
                         [(ngModel)]="sidebarVisible">
                  <span class="text-sm font-medium text-gray-700">Sidebar Visible</span>
                </label>
              </div>
            </div>

            <div class="mt-4 space-y-3">
              @if (activeSidebarView === 2) {
                <button class="px-3 py-1.5 text-sm bg-primary-600 text-white rounded-md hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-primary-500"
                (click)="load('./assets/pdfs/The Public Domain - Enclosing the Commons of the Mind.pdf')">Load PDF with outline</button>
              }
              @if (activeSidebarView === 3) {
                <button class="px-3 py-1.5 text-sm bg-primary-600 text-white rounded-md hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-primary-500"
                (click)="load('./assets/pdfs/annotation-fileattachment.pdf')">Load PDF with attachments</button>
              }
              @if (activeSidebarView === 4) {
                <button class="px-3 py-1.5 text-sm bg-primary-600 text-white rounded-md hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-primary-500"
                (click)="load('/assets/pdfs/themes_de_la_Science-fiction.pdf')">Load PDF with layers</button>
              }

              <div>
                <label for="src-input" class="block text-sm font-medium text-gray-700 mb-1">PDF Source</label>
                <input id="src-input"
                       class="w-full px-2 py-1.5 text-sm border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500"
                       [(ngModel)]="src"
                       placeholder="PDF file path or URL"
                       aria-describedby="src-help" />
                <small id="src-help" class="block text-gray-500 mt-0.5 text-xs">Path to the PDF document</small>
              </div>
            </div>
            </div>
          }
          @if (selectedTab === 1) {
          <div class="tab-content">
            <p>The page is the number page number. It always starts with 1.</p>
            <p>
              The page label is the page number assigned by the author of the PDF document. For example, the document below uses roman numbers
              for the table of contents and arabic numbers for the main body.
            </p>
            <p>
              If you try to use both `[(page)]` and `[(pageLabel)]` with two-way binding, you'll run into
              `ExpressionChangedAfterItHasBeenCheckedErrors`. To prevent this, you'll want to adopt the `OnPush` change detection strategy.
            </p>
            <div class="space-y-3">
              <div>
                <label for="page-input" class="block text-sm font-medium text-gray-700 mb-1">Page Number</label>
                <input id="page-input"
                       class="w-full px-2 py-1.5 text-sm border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500"
                       [(ngModel)]="page"
                       placeholder="e.g., 1, 5, 10"
                       aria-describedby="page-help" />
                <small id="page-help" class="block text-gray-500 mt-0.5 text-xs">Current page number (starts with 1)</small>
              </div>
              <div>
                <label for="page-label-input" class="block text-sm font-medium text-gray-700 mb-1">Page Label</label>
                <input id="page-label-input"
                       class="w-full px-2 py-1.5 text-sm border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500"
                       [(ngModel)]="pageLabel"
                       placeholder="e.g., i, ii, iii, 1, 2"
                       aria-describedby="page-label-help" />
                <small id="page-label-help" class="block text-gray-500 mt-0.5 text-xs">Page label as defined by the PDF author</small>
              </div>
            </div>
          </div>
          }
          @if (selectedTab === 2) {
          <div class="tab-content">
            <p>ngx-extended-pdf-viewer offers two-way binding between Angular attributes and Acroforms embedded in your PDF. Please visit the
              <a [routerLink]="'/extended-pdf-viewer/forms'">dedicated demo</a>.
            </p>
          </div>
          }
        </div>
      </div>
      <div class="bg-white border border-gray-300 rounded-lg shadow-mat-8 p-4 mt-1 flex-1 box-border max-w-[53%]">
        <div class="w-full">
          <!-- Tab buttons -->
          <div class="overflow-x-auto">
            <div class="flex space-x-2 w-max border-b border-gray-200 mb-2">
            <button
              class="px-3 py-1.5 text-xs font-medium border-b-2 focus:outline-none"
              [class.text-primary-600]="codeTab === 'html'"
              [class.border-primary-600]="codeTab === 'html'"
              [class.text-gray-500]="codeTab !== 'html'"
              [class.border-transparent]="codeTab !== 'html'"
              (click)="codeTab = 'html'">
              HTML template
            </button>
            <button
              class="px-3 py-1.5 text-xs font-medium border-b-2 focus:outline-none"
              [class.text-primary-600]="codeTab === 'typescript'"
              [class.border-primary-600]="codeTab === 'typescript'"
              [class.text-gray-500]="codeTab !== 'typescript'"
              [class.border-transparent]="codeTab !== 'typescript'"
              (click)="codeTab = 'typescript'">
              Typescript
            </button>
          </div>
          </div>

          <!-- Tab content -->
          @if (codeTab === 'html') {
          <div class="tab-content">
            <app-ie11-markdown ngPreserveWhitespaces src="/assets/extended-pdf-viewer/two-way-binding/html.md"> </app-ie11-markdown>
          </div>
          }
          @if (codeTab === 'typescript') {
          <div class="tab-content">
            <app-ie11-markdown ngPreserveWhitespaces src="/assets/extended-pdf-viewer/two-way-binding/ts.md"> </app-ie11-markdown>
          </div>
          }
        </div>
      </div>
    </div>
  }

  <app-demo [src]="src">
    <div class="mb-2">
      <small>Note there's a bug in the PDF file. See the <a [routerLink]="['/annotation-layer']">annotation layer demo</a> to see the bugfix.</small>
    </div>
      <ngx-extended-pdf-viewer
        [(src)]="src"
        [height]="'auto'"
        [textLayer]="true"
        [(scrollMode)]="scrollMode"
        [(handTool)]="handTool"
        [(page)]="page"
        [(pageLabel)]="pageLabel"
        [(rotation)]="rotation"
        [(sidebarVisible)]="sidebarVisible"
        [(activeSidebarView)]="activeSidebarView"
        [(spread)]="spread"
        [(zoom)]="zoom"
        (currentZoomFactor)="currentZoomFactor=$event"


      [theme]="theme">
      </ngx-extended-pdf-viewer>

    </app-demo>
  </div>
