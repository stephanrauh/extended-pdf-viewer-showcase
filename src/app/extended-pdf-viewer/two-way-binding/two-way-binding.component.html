<div class="flex-container-column fill-container">
  @if (!(fullscreenService.isFullscreen$ | async)) {
    <div class="flex-container-row" >
      <div class="bg-white border border-gray-300 rounded-lg shadow-mat-8 p-6 distance16 margin-right" style="flex: 1 1 100%; box-sizing: border-box; max-width:45%">
        <div class="w-full">
          <!-- Tab buttons -->
          <div class="overflow-x-auto">
            <div class="flex space-x-2 w-max border-b border-gray-200 mb-2">
            <button 
              class="px-3 py-1.5 text-xs font-medium border-b-2 focus:outline-none"
              [class.text-primary-600]="selectedTab === 0"
              [class.border-primary-600]="selectedTab === 0"
              [class.text-gray-500]="selectedTab !== 0"
              [class.border-transparent]="selectedTab !== 0"
              (click)="selectedTab = 0">
              Getting started
            </button>
            <button 
              class="px-3 py-1.5 text-xs font-medium border-b-2 focus:outline-none"
              [class.text-primary-600]="selectedTab === 1"
              [class.border-primary-600]="selectedTab === 1"
              [class.text-gray-500]="selectedTab !== 1"
              [class.border-transparent]="selectedTab !== 1"
              (click)="selectedTab = 1">
              Page and page label
            </button>
            <button 
              class="px-3 py-1.5 text-xs font-medium border-b-2 focus:outline-none"
              [class.text-primary-600]="selectedTab === 2"
              [class.border-primary-600]="selectedTab === 2"
              [class.text-gray-500]="selectedTab !== 2"
              [class.border-transparent]="selectedTab !== 2"
              (click)="selectedTab = 2">
              Forms
            </button>
          </div>
          </div>
          
          <!-- Tab content -->
          @if (selectedTab === 0) {
          <div class="tab-content">
            <p>
              Many properties of ngx-extended-pdf-viewer support two-way binding.
            </p>
            <div class="space-y-4">
              <div>
                <input class="w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500 compact-input" 
                       [(ngModel)]="zoom" 
                       placeholder="[(zoom)]" />
              </div>
              <span>(currentZoomFactor)="{{currentZoomFactor}}"</span>
              <br />
              <div>
                <input class="w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500 compact-input margin-top" 
                       [(ngModel)]="rotation" 
                       placeholder="[(rotation)]=0 | 90 | 180 | 270" />
              </div>
              <div>
                <input class="w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500 compact-input" 
                       [(ngModel)]="spread" 
                       placeholder="[(spread)]='off' | 'even' | 'odd'" />
              </div>
              <br />
              <div>
                <input class="w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500 compact-input" 
                       [(ngModel)]="scrollMode" 
                       placeholder="[(scrollMode)]" />
                <small class="block text-gray-500 mt-1">0=vertical 1=horizontal 2=block 3=single page</small>
              </div>
              <br />
              <div>
                <input class="w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500 compact-input" 
                       [(ngModel)]="activeSidebarView" 
                       placeholder="[(activeSidebarView)]" />
                <small class="block text-gray-500 mt-1">1=thumbnails 2=outline 3=attachments 4=layers</small>
              </div>
              @if (activeSidebarView === 2) {
                <button class="px-4 py-2 bg-primary-600 text-white rounded-md hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-primary-500"
                (click)="load('./assets/pdfs/The Public Domain - Enclosing the Commons of the Mind.pdf')">load a PDF with outline</button>
              }
              @if (activeSidebarView === 3) {
                <button class="px-4 py-2 bg-primary-600 text-white rounded-md hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-primary-500"
                (click)="load('./assets/pdfs/annotation-fileattachment.pdf')">load a PDF with attachments</button>
              }
              @if (activeSidebarView === 4) {
                <button class="px-4 py-2 bg-primary-600 text-white rounded-md hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-primary-500"
                (click)="load('/assets/pdfs/themes_de_la_Science-fiction.pdf')">load a PDF with layers</button>
              }
              <br />
              <label class="flex items-center space-x-2">
                <input type="checkbox" class="form-checkbox text-primary-600" [(ngModel)]="sidebarVisible">
                <span>[(sidebarVisible)]</span>
              </label>
              <br />
              <div>
                <input class="w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500 compact-input" 
                       [(ngModel)]="src" 
                       placeholder="[(src)]" />
              </div>
            </div>
          </div>
          }
          @if (selectedTab === 1) {
          <div class="tab-content">
            <p>The page is the number page number. It always starts with 1.</p>
            <p>
              The page label is the page number assigned by the author of the PDF document. For example, the document below uses roman numbers
              for the table of contents and arabic numbers for the main body.
            </p>
            <p>
              If you try to use both `[(page)]` and `[(pageLabel)]` with two-way binding, you'll run into
              `ExpressionChangedAfterItHasBeenCheckedErrors`. To prevent this, you'll want to adopt the `OnPush` change detection strategy.
            </p>
            <div class="space-y-4">
              <div>
                <input class="w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500 compact-input" 
                       [(ngModel)]="page" 
                       placeholder="Current page number" />
              </div>
              <div>
                <input class="w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500" 
                       [(ngModel)]="pageLabel" 
                       placeholder="Current page label" />
              </div>
            </div>
          </div>
          }
          @if (selectedTab === 2) {
          <div class="tab-content">
            <p>ngx-extended-pdf-viewer offers two-way binding between Angular attributes and Acroforms embedded in your PDF. Please visit the
              <a [routerLink]="'/extended-pdf-viewer/forms'">dedicated demo</a>.
            </p>
          </div>
          }
        </div>
      </div>
      <div class="bg-white border border-gray-300 rounded-lg shadow-mat-8 p-6 distance16 progress" style="flex: 1 1 100%; box-sizing: border-box; max-width:53%">
        <div class="w-full">
          <!-- Tab buttons -->
          <div class="overflow-x-auto">
            <div class="flex space-x-2 w-max border-b border-gray-200 mb-2">
            <button 
              class="px-3 py-1.5 text-xs font-medium border-b-2 focus:outline-none"
              [class.text-primary-600]="codeTab === 'html'"
              [class.border-primary-600]="codeTab === 'html'"
              [class.text-gray-500]="codeTab !== 'html'"
              [class.border-transparent]="codeTab !== 'html'"
              (click)="codeTab = 'html'">
              HTML template
            </button>
            <button 
              class="px-3 py-1.5 text-xs font-medium border-b-2 focus:outline-none"
              [class.text-primary-600]="codeTab === 'typescript'"
              [class.border-primary-600]="codeTab === 'typescript'"
              [class.text-gray-500]="codeTab !== 'typescript'"
              [class.border-transparent]="codeTab !== 'typescript'"
              (click)="codeTab = 'typescript'">
              Typescript
            </button>
          </div>
          </div>
          
          <!-- Tab content -->
          @if (codeTab === 'html') {
          <div class="tab-content">
            <app-ie11-markdown ngPreserveWhitespaces src="/assets/extended-pdf-viewer/two-way-binding/html.md"> </app-ie11-markdown>
          </div>
          }
          @if (codeTab === 'typescript') {
          <div class="tab-content">
            <app-ie11-markdown ngPreserveWhitespaces src="/assets/extended-pdf-viewer/two-way-binding/ts.md"> </app-ie11-markdown>
          </div>
          }
        </div>
      </div>
    </div>
  }

  <app-demo [src]="src">
    <div style="margin-bottom: 8px;">
      <small>Note there's a bug in the PDF file. See the <a [routerLink]="['/annotation-layer']">annotation layer demo</a> to see the bugfix.</small>
    </div>
      <ngx-extended-pdf-viewer
        [(src)]="src"
        [height]="'auto'"
        [textLayer]="true"
        [(scrollMode)]="scrollMode"
        [(handTool)]="handTool"
        [(page)]="page"
        [(pageLabel)]="pageLabel"
        [(rotation)]="rotation"
        [(sidebarVisible)]="sidebarVisible"
        [(activeSidebarView)]="activeSidebarView"
        [(spread)]="spread"
        [(zoom)]="zoom"
        (currentZoomFactor)="currentZoomFactor=$event"

        >
      </ngx-extended-pdf-viewer>

    </app-demo>
  </div>